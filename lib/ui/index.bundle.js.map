{"version":3,"file":"index.bundle.js","mappings":"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ACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,sDAAsD;WACtD,sCAAsC,iEAAiE;WACvG;WACA;WACA;WACA;WACA;WACA;;;;;WCzBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;WChDA;;;;;UEAA;UACA;UACA;UACA;UACA","sources":["webpack://@stuayu/mirakurun/./src/ui/components/HeartView.css","webpack://@stuayu/mirakurun/./src/ui/components/Logs.css","webpack://@stuayu/mirakurun/./src/ui/index.css","webpack://@stuayu/mirakurun/./src/ui/components/HeartView.css?9ac2","webpack://@stuayu/mirakurun/./src/ui/components/Logs.css?1510","webpack://@stuayu/mirakurun/./src/ui/index.css?3ef0","webpack://@stuayu/mirakurun/./src/ui/components/ChannelsConfigurator.tsx","webpack://@stuayu/mirakurun/./src/ui/components/ConfigView.tsx","webpack://@stuayu/mirakurun/./src/ui/components/ConnectionGuide.tsx","webpack://@stuayu/mirakurun/./src/ui/components/EventsView.tsx","webpack://@stuayu/mirakurun/./src/ui/components/HeartView.tsx","webpack://@stuayu/mirakurun/./src/ui/components/LogsView.tsx","webpack://@stuayu/mirakurun/./src/ui/components/Restart.tsx","webpack://@stuayu/mirakurun/./src/ui/components/ServerConfigurator.tsx","webpack://@stuayu/mirakurun/./src/ui/components/StatusView.tsx","webpack://@stuayu/mirakurun/./src/ui/components/TunersConfigurator.tsx","webpack://@stuayu/mirakurun/./src/ui/components/TunersManager.tsx","webpack://@stuayu/mirakurun/./src/ui/components/UpdateAlert.tsx","webpack://@stuayu/mirakurun/./src/ui/index.tsx","webpack://@stuayu/mirakurun/webpack/bootstrap","webpack://@stuayu/mirakurun/webpack/runtime/chunk loaded","webpack://@stuayu/mirakurun/webpack/runtime/compat get default export","webpack://@stuayu/mirakurun/webpack/runtime/create fake namespace object","webpack://@stuayu/mirakurun/webpack/runtime/define property getters","webpack://@stuayu/mirakurun/webpack/runtime/global","webpack://@stuayu/mirakurun/webpack/runtime/hasOwnProperty shorthand","webpack://@stuayu/mirakurun/webpack/runtime/make namespace object","webpack://@stuayu/mirakurun/webpack/runtime/node module decorator","webpack://@stuayu/mirakurun/webpack/runtime/jsonp chunk loading","webpack://@stuayu/mirakurun/webpack/runtime/nonce","webpack://@stuayu/mirakurun/webpack/before-startup","webpack://@stuayu/mirakurun/webpack/startup","webpack://@stuayu/mirakurun/webpack/after-startup"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*\\r\\n   Copyright 2021 kanreisa\\r\\n\\r\\n   Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n   you may not use this file except in compliance with the License.\\r\\n   You may obtain a copy of the License at\\r\\n\\r\\n       http://www.apache.org/licenses/LICENSE-2.0\\r\\n\\r\\n   Unless required by applicable law or agreed to in writing, software\\r\\n   distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n   See the License for the specific language governing permissions and\\r\\n   limitations under the License.\\r\\n*/\\r\\n.heart-view > div.consent {\\r\\n    margin: 16px 32px;\\r\\n    max-width: 450px;\\r\\n}\\r\\n\\r\\n.heart-view > .ms-Stack > span,\\r\\n.heart-view > .ms-Stack img {\\r\\n    margin: 8px 16px;\\r\\n}\\r\\n\\r\\n.heart-view img {\\r\\n    display: inline-block;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/components/HeartView.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;CAcC;AACD;IACI,iBAAiB;IACjB,gBAAgB;AACpB;;AAEA;;IAEI,gBAAgB;AACpB;;AAEA;IACI,qBAAqB;AACzB\",\"sourcesContent\":[\"/*\\r\\n   Copyright 2021 kanreisa\\r\\n\\r\\n   Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n   you may not use this file except in compliance with the License.\\r\\n   You may obtain a copy of the License at\\r\\n\\r\\n       http://www.apache.org/licenses/LICENSE-2.0\\r\\n\\r\\n   Unless required by applicable law or agreed to in writing, software\\r\\n   distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n   See the License for the specific language governing permissions and\\r\\n   limitations under the License.\\r\\n*/\\r\\n.heart-view > div.consent {\\r\\n    margin: 16px 32px;\\r\\n    max-width: 450px;\\r\\n}\\r\\n\\r\\n.heart-view > .ms-Stack > span,\\r\\n.heart-view > .ms-Stack img {\\r\\n    margin: 8px 16px;\\r\\n}\\r\\n\\r\\n.heart-view img {\\r\\n    display: inline-block;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*\\r\\n   Copyright 2020 kanreisa\\r\\n\\r\\n   Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n   you may not use this file except in compliance with the License.\\r\\n   You may obtain a copy of the License at\\r\\n\\r\\n       http://www.apache.org/licenses/LICENSE-2.0\\r\\n\\r\\n   Unless required by applicable law or agreed to in writing, software\\r\\n   distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n   See the License for the specific language governing permissions and\\r\\n   limitations under the License.\\r\\n*/\\r\\ndiv.logs {\\r\\n    overflow: scroll;\\r\\n    height: calc(100vh - 300px);\\r\\n    box-sizing: border-box;\\r\\n    padding: 8px 0;\\r\\n    font-family: 'Courier New', Courier, monospace;\\r\\n    font-size: 12px;\\r\\n    border: 2px solid #605e5c;\\r\\n    background: #292827;\\r\\n    color: #bbb;\\r\\n}\\r\\n\\r\\ndiv.logs > div {\\r\\n    padding: 2px 16px;\\r\\n    word-break: break-all;\\r\\n    white-space: break-spaces;\\r\\n}\\r\\n\\r\\ndiv.logs > div.latest {\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\ndiv.logs > div:hover {\\r\\n    background: #1b1a19;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-debug {\\r\\n    color: #a098e5;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-info {\\r\\n    color: #eee;\\r\\n}\\r\\n\\r\\ndiv.logs > div.type-create {\\r\\n    color: #c3d825;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-warn,\\r\\ndiv.logs > div.type-update {\\r\\n    color: #f6ad49;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-error,\\r\\ndiv.logs > div.type-remove {\\r\\n    color: #e95464;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-fatal {\\r\\n    color: #fff;\\r\\n    background: #c9171e;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/components/Logs.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;CAcC;AACD;IACI,gBAAgB;IAChB,2BAA2B;IAC3B,sBAAsB;IACtB,cAAc;IACd,8CAA8C;IAC9C,eAAe;IACf,yBAAyB;IACzB,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,iBAAiB;IACjB,qBAAqB;IACrB,yBAAyB;AAC7B;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,cAAc;AAClB;;AAEA;;IAEI,cAAc;AAClB;;AAEA;;IAEI,cAAc;AAClB;;AAEA;IACI,WAAW;IACX,mBAAmB;AACvB\",\"sourcesContent\":[\"/*\\r\\n   Copyright 2020 kanreisa\\r\\n\\r\\n   Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n   you may not use this file except in compliance with the License.\\r\\n   You may obtain a copy of the License at\\r\\n\\r\\n       http://www.apache.org/licenses/LICENSE-2.0\\r\\n\\r\\n   Unless required by applicable law or agreed to in writing, software\\r\\n   distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n   See the License for the specific language governing permissions and\\r\\n   limitations under the License.\\r\\n*/\\r\\ndiv.logs {\\r\\n    overflow: scroll;\\r\\n    height: calc(100vh - 300px);\\r\\n    box-sizing: border-box;\\r\\n    padding: 8px 0;\\r\\n    font-family: 'Courier New', Courier, monospace;\\r\\n    font-size: 12px;\\r\\n    border: 2px solid #605e5c;\\r\\n    background: #292827;\\r\\n    color: #bbb;\\r\\n}\\r\\n\\r\\ndiv.logs > div {\\r\\n    padding: 2px 16px;\\r\\n    word-break: break-all;\\r\\n    white-space: break-spaces;\\r\\n}\\r\\n\\r\\ndiv.logs > div.latest {\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\ndiv.logs > div:hover {\\r\\n    background: #1b1a19;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-debug {\\r\\n    color: #a098e5;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-info {\\r\\n    color: #eee;\\r\\n}\\r\\n\\r\\ndiv.logs > div.type-create {\\r\\n    color: #c3d825;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-warn,\\r\\ndiv.logs > div.type-update {\\r\\n    color: #f6ad49;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-error,\\r\\ndiv.logs > div.type-remove {\\r\\n    color: #e95464;\\r\\n}\\r\\n\\r\\ndiv.logs > div.level-fatal {\\r\\n    color: #fff;\\r\\n    background: #c9171e;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../../node_modules/css-loader/dist/cjs.js!../../node_modules/@fluentui/react/dist/css/fabric.min.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*\\r\\n   Copyright 2020 kanreisa\\r\\n\\r\\n   Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n   you may not use this file except in compliance with the License.\\r\\n   You may obtain a copy of the License at\\r\\n\\r\\n       http://www.apache.org/licenses/LICENSE-2.0\\r\\n\\r\\n   Unless required by applicable law or agreed to in writing, software\\r\\n   distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n   See the License for the specific language governing permissions and\\r\\n   limitations under the License.\\r\\n*/\\r\\n\\r\\nbody {\\r\\n    background: #25272e;\\r\\n}\\r\\n\\r\\n.ms-Fabric {\\r\\n    color: #ebebeb;\\r\\n}\\r\\n\\r\\n.ms-layer {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\ninput::placeholder {\\r\\n    color: #686b77 !important;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/index.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;CAcC;;AAGD;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,yBAAyB;AAC7B\",\"sourcesContent\":[\"/*\\r\\n   Copyright 2020 kanreisa\\r\\n\\r\\n   Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\r\\n   you may not use this file except in compliance with the License.\\r\\n   You may obtain a copy of the License at\\r\\n\\r\\n       http://www.apache.org/licenses/LICENSE-2.0\\r\\n\\r\\n   Unless required by applicable law or agreed to in writing, software\\r\\n   distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\r\\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\r\\n   See the License for the specific language governing permissions and\\r\\n   limitations under the License.\\r\\n*/\\r\\n@import \\\"@fluentui/react/dist/css/fabric.min.css\\\";\\r\\n\\r\\nbody {\\r\\n    background: #25272e;\\r\\n}\\r\\n\\r\\n.ms-Fabric {\\r\\n    color: #ebebeb;\\r\\n}\\r\\n\\r\\n.ms-layer {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\ninput::placeholder {\\r\\n    color: #686b77 !important;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!./HeartView.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!./Logs.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!./index.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n    Stack,\r\n    Spinner,\r\n    SpinnerSize,\r\n    DetailsList,\r\n    Selection,\r\n    SelectionMode,\r\n    IColumn,\r\n    Dropdown,\r\n    PrimaryButton,\r\n    DefaultButton,\r\n    Toggle,\r\n    Dialog,\r\n    DialogType,\r\n    DialogFooter,\r\n    TextField,\r\n    IconButton,\r\n    ActionButton\r\n} from \"@fluentui/react\";\r\nimport { UIState } from \"../index\";\r\nimport { ConfigChannels, ChannelType } from \"../../../api\";\r\n\r\nconst configAPI = \"/api/config/channels\";\r\n\r\ninterface Item {\r\n    key: string;\r\n    enable: JSX.Element;\r\n    name: JSX.Element;\r\n    type: JSX.Element;\r\n    channel: JSX.Element;\r\n    options: JSX.Element;\r\n    controls: JSX.Element;\r\n}\r\n\r\nconst columns: IColumn[] = [\r\n    {\r\n        key: \"col-enable\",\r\n        name: \"Enable\",\r\n        fieldName: \"enable\",\r\n        minWidth: 44,\r\n        maxWidth: 44\r\n    },\r\n    {\r\n        key: \"col-name\",\r\n        name: \"Name\",\r\n        fieldName: \"name\",\r\n        minWidth: 100,\r\n        maxWidth: 100\r\n    },\r\n    {\r\n        key: \"col-type\",\r\n        name: \"Type\",\r\n        fieldName: \"type\",\r\n        minWidth: 65,\r\n        maxWidth: 65\r\n    },\r\n    {\r\n        key: \"col-channel\",\r\n        name: \"Channel\",\r\n        fieldName: \"channel\",\r\n        minWidth: 70,\r\n        maxWidth: 70\r\n    },\r\n    {\r\n        key: \"col-options\",\r\n        name: \"Options\",\r\n        fieldName: \"options\",\r\n        minWidth: 200,\r\n        // maxWidth: 400\r\n    },\r\n    {\r\n        key: \"col-controls\",\r\n        name: \"\",\r\n        fieldName: \"controls\",\r\n        minWidth: 120,\r\n        maxWidth: 120\r\n    }\r\n];\r\n\r\nconst dummySelection = new Selection(); // dummy\r\n\r\nconst typesIndex = [\"GR\", \"BS\", \"CS\", \"SKY\", \"NW1\", \"NW2\", \"NW3\", \"NW4\", \"NW5\", \"NW6\", \"NW7\", \"NW8\", \"NW9\", \"NW10\", \"NW11\", \"NW12\", \"NW13\", \"NW14\", \"NW15\", \"NW16\", \"NW17\", \"NW18\", \"NW19\", \"NW20\"];\r\nfunction sortTypes(types: ChannelType[]): ChannelType[] {\r\n    return types.sort((a, b) => typesIndex.indexOf(a) - typesIndex.indexOf(b));\r\n}\r\n\r\nconst Configurator: React.FC<{ uiState: UIState, uiStateEvents: EventEmitter }> = ({ uiState, uiStateEvents }) => {\r\n\r\n    const [current, setCurrent] = useState<ConfigChannels>(null);\r\n    const [editing, setEditing] = useState<ConfigChannels>(null);\r\n    const [showSaveDialog, setShowSaveDialog] = useState<boolean>(false);\r\n    const [saved, setSaved] = useState<boolean>(false);\r\n    const listContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (saved === true) {\r\n            setTimeout(() => {\r\n                uiStateEvents.emit(\"notify:restart-required\");\r\n            }, 500);\r\n            setSaved(false);\r\n            return;\r\n        }\r\n        (async () => {\r\n            try {\r\n                const res = await (await fetch(configAPI)).json();\r\n                console.log(\"ChannelsConfigurator\", \"GET\", configAPI, \"->\", res);\r\n                setEditing(JSON.parse(JSON.stringify(res)));\r\n                setCurrent(JSON.parse(JSON.stringify(res)));\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        })();\r\n    }, [saved]);\r\n\r\n    const items = [];\r\n    editing?.forEach((ch, i) => {\r\n        const item: Item = {\r\n            key: `item${i}`,\r\n            enable: (\r\n                <Toggle\r\n                    checked={!ch.isDisabled}\r\n                    onChange={(ev, checked) => {\r\n                        ch.isDisabled = !checked;\r\n                        setEditing([...editing]);\r\n                    }}\r\n                    style={{ marginTop: 6 }}\r\n                />\r\n            ),\r\n            name: (\r\n                <TextField\r\n                    value={ch.name}\r\n                    onChange={(ev, newValue) => {\r\n                        ch.name = newValue;\r\n                        setEditing([...editing]);\r\n                    }}\r\n                    onBlur={() => {\r\n                        if (ch.name === \"\") {\r\n                            ch.name = `ch${i}`;\r\n                            setEditing([...editing]);\r\n                        }\r\n                    }}\r\n                />\r\n            ),\r\n            type: (\r\n                <Dropdown\r\n                    options={[\r\n                        { key: \"GR\", text: \"GR\" },\r\n                        { key: \"BS\", text: \"BS\" },\r\n                        { key: \"CS\", text: \"CS\" },\r\n                        { key: \"SKY\", text: \"SKY\" },\r\n                        { key: \"NW1\", text: \"NW1\" },\r\n                        { key: \"NW2\", text: \"NW2\" },\r\n                        { key: \"NW3\", text: \"NW3\" },\r\n                        { key: \"NW4\", text: \"NW4\" },\r\n                        { key: \"NW5\", text: \"NW5\" },\r\n                        { key: \"NW6\", text: \"NW6\" },\r\n                        { key: \"NW7\", text: \"NW7\" },\r\n                        { key: \"NW8\", text: \"NW8\" },\r\n                        { key: \"NW9\", text: \"NW9\" },\r\n                        { key: \"NW10\", text: \"NW10\" },\r\n                        { key: \"NW11\", text: \"NW11\" },\r\n                        { key: \"NW12\", text: \"NW12\" },\r\n                        { key: \"NW13\", text: \"NW13\" },\r\n                        { key: \"NW14\", text: \"NW14\" },\r\n                        { key: \"NW15\", text: \"NW15\" },\r\n                        { key: \"NW16\", text: \"NW16\" },\r\n                        { key: \"NW17\", text: \"NW17\" },\r\n                        { key: \"NW18\", text: \"NW18\" },\r\n                        { key: \"NW19\", text: \"NW19\" },\r\n                        { key: \"NW20\", text: \"NW20\" }\r\n                    ]}\r\n                    selectedKey={ch.type}\r\n                    onChange={(ev, option) => {\r\n                        ch.type = option.key as any;\r\n                        setEditing([...editing]);\r\n                    }}\r\n                />\r\n            ),\r\n            channel: (\r\n                <TextField\r\n                    value={ch.channel}\r\n                    onChange={(ev, newValue) => {\r\n                        ch.channel = newValue;\r\n                        setEditing([...editing]);\r\n                    }}\r\n                    onBlur={() => {\r\n                        if (ch.channel === \"\") {\r\n                            ch.channel = \"0\";\r\n                            setEditing([...editing]);\r\n                        }\r\n                    }}\r\n                />\r\n            ),\r\n            options: (\r\n                <Stack tokens={{ childrenGap: \"8 0\" }}>\r\n                    <Stack horizontal tokens={{ childrenGap: \"0 8\" }}>\r\n                        <TextField\r\n                            style={{ width: 55 }}\r\n                            label=\"Service ID:\"\r\n                            value={`${ch.serviceId || \"\"}`}\r\n                            onChange={(ev, newValue) => {\r\n                                if (newValue === \"\") {\r\n                                    delete ch.serviceId;\r\n                                } else if (/^[0-9]+$/.test(newValue)) {\r\n                                    const sid = parseInt(newValue, 10);\r\n                                    if (sid <= 65535 && sid > 0) {\r\n                                        ch.serviceId = sid;\r\n                                    }\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            style={{ width: 80 }}\r\n                            label=\"Satellite:\"\r\n                            value={ch.satellite || \"\"}\r\n                            onChange={(ev, newValue) => {\r\n                                if (newValue === \"\") {\r\n                                    delete ch.satellite;\r\n                                } else {\r\n                                    ch.satellite = newValue;\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            style={{ width: 40 }}\r\n                            label=\"Space:\"\r\n                            placeholder=\"0\"\r\n                            value={`${ch.space || \"\"}`}\r\n                            onChange={(ev, newValue) => {\r\n                                if (newValue === \"\") {\r\n                                    delete ch.space;\r\n                                } else if (/^[0-9]+$/.test(newValue)) {\r\n                                    const space = parseInt(newValue, 10);\r\n                                    if (space <= 65535 && space >= 0) {\r\n                                        ch.space = space;\r\n                                    }\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            style={{ width: 60 }}\r\n                            label=\"Freq:\"\r\n                            value={`${ch.freq || \"\"}`}\r\n                            onChange={(ev, newValue) => {\r\n                                if (newValue === \"\") {\r\n                                    delete ch.freq;\r\n                                } else if (/^[0-9\\.]+$/.test(newValue)) {\r\n                                    const freq = parseFloat(newValue);\r\n                                    ch.freq = freq;\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                        <Dropdown\r\n                            label=\"Polarity:\"\r\n                            options={[\r\n                                { key: \"-\", text: \"-\" },\r\n                                { key: \"H\", text: \"H\" },\r\n                                { key: \"V\", text: \"V\" }\r\n                            ]}\r\n                            selectedKey={ch.polarity || \"-\"}\r\n                            onChange={(ev, option) => {\r\n                                if (option.key === \"-\") {\r\n                                    delete ch.polarity;\r\n                                } else {\r\n                                    ch.polarity = option.key as any;\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                        <TextField\r\n                            style={{ width: 40 }}\r\n                            label=\"TsmfRelTs:\"\r\n                            value={`${ch.tsmfRelTs || \"\"}`}\r\n                            onChange={(ev, newValue) => {\r\n                                if (newValue === \"\") {\r\n                                    delete ch.tsmfRelTs;\r\n                                } else if (/^[0-9]+$/.test(newValue)) {\r\n                                    const tsmfRelTs = parseInt(newValue, 10);\r\n                                    ch.tsmfRelTs = tsmfRelTs;\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                    </Stack>\r\n                </Stack>\r\n            ),\r\n            controls: (\r\n                <Stack horizontal horizontalAlign=\"end\">\r\n                    <IconButton\r\n                        disabled={i === 0}\r\n                        style={{ opacity: i === 0 ? 0 : 1 }}\r\n                        title=\"Up\"\r\n                        iconProps={{ iconName: \"Up\" }}\r\n                        onClick={() => {\r\n                            editing.splice(i, 1);\r\n                            editing.splice(i - 1, 0, ch);\r\n                            setEditing([...editing]);\r\n                        }}\r\n                    />\r\n                    <IconButton\r\n                        disabled={i === editing.length - 1}\r\n                        style={{ opacity: i === editing.length - 1 ? 0 : 1 }}\r\n                        title=\"Down\"\r\n                        iconProps={{ iconName: \"Down\" }}\r\n                        onClick={() => {\r\n                            editing.splice(i, 1);\r\n                            editing.splice(i + 1, 0, ch);\r\n                            setEditing([...editing]);\r\n                        }}\r\n                    />\r\n                    <IconButton\r\n                        title=\"Controls\"\r\n                        iconProps={{ iconName: \"More\" }}\r\n                        menuProps={{ items: [{\r\n                            key: \"remove\",\r\n                            text: \"Remove Channel\",\r\n                            iconProps: { iconName: \"Delete\" },\r\n                            onClick: () => {\r\n                                editing.splice(i, 1);\r\n                                setEditing([...editing]);\r\n                            }\r\n                        }] }}\r\n                    />\r\n                </Stack>\r\n            )\r\n        };\r\n        //\r\n        items.push(item);\r\n    });\r\n\r\n    const changed = JSON.stringify(current) !== JSON.stringify(editing);\r\n\r\n    if (listContainerRef.current) {\r\n        listContainerRef.current.style.maxHeight = \"calc(100vh - 410px)\";\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!current && <Spinner size={SpinnerSize.large} />}\r\n            {editing &&\r\n                <Stack tokens={{ childrenGap: \"8 0\" }}>\r\n                    <Stack.Item>\r\n                        <ActionButton\r\n                            text=\"Add Channel\"\r\n                            iconProps={{ iconName: \"Add\" }}\r\n                            onClick={() => {\r\n                                const i = editing.length;\r\n                                editing.push({\r\n                                    name: `ch${i}`,\r\n                                    type: \"GR\",\r\n                                    channel: \"0\",\r\n                                    isDisabled: true\r\n                                });\r\n                                setEditing([...editing]);\r\n                                setTimeout(() => {\r\n                                    listContainerRef.current.scrollTop = listContainerRef.current.scrollHeight;\r\n                                }, 0);\r\n                            }}\r\n                        />\r\n                    </Stack.Item>\r\n\r\n                    <div ref={listContainerRef} style={{ overflowY: \"scroll\" }}>\r\n                        <DetailsList\r\n                            setKey=\"items\"\r\n                            items={items}\r\n                            columns={columns}\r\n                            selection={dummySelection}\r\n                            selectionMode={SelectionMode.none}\r\n                        />\r\n                    </div>\r\n\r\n                    <Stack horizontal tokens={{ childrenGap: \"0 8\" }} style={{ marginTop: 16 }}>\r\n                        <PrimaryButton text=\"Save\" disabled={!changed} onClick={() => setShowSaveDialog(true)} />\r\n                        <DefaultButton text=\"Cancel\" disabled={!changed} onClick={() => setEditing(JSON.parse(JSON.stringify(current)))} />\r\n                    </Stack>\r\n                </Stack>\r\n            }\r\n            <Dialog\r\n                hidden={!showSaveDialog}\r\n                onDismiss={() => setShowSaveDialog(false)}\r\n                dialogContentProps={{\r\n                    type: DialogType.largeHeader,\r\n                    title: \"Save\",\r\n                    subText: \"Restart is required to apply configuration.\"\r\n                }}\r\n            >\r\n                <DialogFooter>\r\n                    <PrimaryButton\r\n                        text=\"Save\"\r\n                        onClick={() => {\r\n                            setShowSaveDialog(false);\r\n                            (async () => {\r\n                                console.log(\"ChannelsConfigurator\", \"PUT\", configAPI, \"<-\", editing);\r\n                                await fetch(configAPI, {\r\n                                    method: \"PUT\",\r\n                                    headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\r\n                                    body: JSON.stringify(editing)\r\n                                });\r\n                                setSaved(true);\r\n                            })();\r\n                        }}\r\n                    />\r\n                    <DefaultButton\r\n                        text=\"Cancel\"\r\n                        onClick={() => setShowSaveDialog(false)}\r\n                    />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Configurator;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n    Stack,\r\n    Nav\r\n} from \"@fluentui/react\";\r\nimport { UIState } from \"../index\";\r\nimport ServerConfigurator from \"./ServerConfigurator\";\r\nimport TunersConfigurator from \"./TunersConfigurator\";\r\nimport ChannelsConfigurator from \"./ChannelsConfigurator\";\r\n\r\nconst ConfigView: React.FC<{ uiState: UIState, uiStateEvents: EventEmitter }> = ({ uiState, uiStateEvents }) => {\r\n\r\n    const [key, setKey] = useState<string>(\"server\");\r\n\r\n    return (\r\n        <Stack horizontal tokens={{ childrenGap: \"0 8\" }} style={{ margin: \"8px 0\" }}>\r\n            <Nav\r\n                groups={[\r\n                    {\r\n                        links: [\r\n                            {\r\n                                key: \"server\",\r\n                                name: \"Server\",\r\n                                url: null,\r\n                                onClick: () => setKey(\"server\")\r\n                            },\r\n                            {\r\n                                key: \"tuners\",\r\n                                name: \"Tuners\",\r\n                                url: null,\r\n                                onClick: () => setKey(\"tuners\")\r\n                            },\r\n                            {\r\n                                key: \"channels\",\r\n                                name: \"Channels\",\r\n                                url: null,\r\n                                onClick: () => setKey(\"channels\")\r\n                            }\r\n                        ]\r\n                    }\r\n                ]}\r\n                selectedKey={key}\r\n                styles={{ root: { width: 150 } }}\r\n            />\r\n            <Stack.Item grow>\r\n                <div style={{ margin: \"8px 0 8px 24px\" }}>\r\n                    {key === \"server\" && <ServerConfigurator uiState={uiState} uiStateEvents={uiStateEvents} />}\r\n                    {key === \"tuners\" && <TunersConfigurator uiState={uiState} uiStateEvents={uiStateEvents} />}\r\n                    {key === \"channels\" && <ChannelsConfigurator uiState={uiState} uiStateEvents={uiStateEvents} />}\r\n                </div>\r\n            </Stack.Item>\r\n        </Stack>\r\n    );\r\n};\r\n\r\nexport default ConfigView;\r\n","/*\r\n   Copyright 2021 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport * as React from \"react\";\r\nimport { useState } from \"react\";\r\nimport {\r\n    getTheme,\r\n    FontWeights,\r\n    mergeStyleSets,\r\n    IButtonStyles,\r\n    IconButton,\r\n    IStackProps,\r\n    ActionButton,\r\n    Modal,\r\n    Stack,\r\n    Separator,\r\n    Label,\r\n    TextField,\r\n    TooltipHost,\r\n    Icon\r\n} from \"@fluentui/react\";\r\n\r\nfunction selectHandler(e: React.MouseEvent<HTMLInputElement>) {\r\n    e.currentTarget.select();\r\n}\r\n\r\nconst ConnectionGuide: React.FC = () => {\r\n\r\n    const [isModalOpen, setModalOpen] = useState<boolean>(false);\r\n\r\n    const theme = getTheme();\r\n    const contentStyles = mergeStyleSets({\r\n        container: {\r\n            display: \"flex\",\r\n            flexFlow: \"column nowrap\",\r\n            alignItems: \"stretch\",\r\n        },\r\n        header: [\r\n            theme.fonts.xLarge,\r\n            {\r\n                flex: \"1 1 auto\",\r\n                borderTop: `4px solid ${theme.palette.themePrimary}`,\r\n                color: theme.palette.themePrimary,\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                fontWeight: FontWeights.semibold,\r\n                padding: \"12px 12px 14px 24px\",\r\n            },\r\n        ],\r\n        body: {\r\n            flex: \"4 4 auto\",\r\n            padding: \"0 24px 24px 24px\",\r\n            overflowY: \"hidden\",\r\n            width: \"75vw\",\r\n            minWidth: \"400px\",\r\n            maxWidth: \"500px\",\r\n            selectors: {\r\n                p: { margin: \"14px 0\" },\r\n                \"p:first-child\": { marginTop: 0 },\r\n                \"p:last-child\": { marginBottom: 0 },\r\n            },\r\n        },\r\n    });\r\n    const stackProps: Partial<IStackProps> = {\r\n        tokens: { childrenGap: 8 },\r\n        styles: { root: { marginBottom: 20 } },\r\n    };\r\n    const iconButtonStyles: Partial<IButtonStyles> = {\r\n        root: {\r\n            color: theme.palette.neutralPrimary,\r\n            marginLeft: \"auto\",\r\n            marginTop: \"4px\",\r\n            marginRight: \"2px\",\r\n        },\r\n        rootHovered: {\r\n            color: theme.palette.neutralDark,\r\n        },\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Modal\r\n                titleAriaId=\"connection-guide-title\"\r\n                isOpen={isModalOpen}\r\n                onDismiss={() => setModalOpen(false)}\r\n                isBlocking={false}\r\n                containerClassName={contentStyles.container}\r\n            >\r\n                <div className={contentStyles.header}>\r\n                    <span id=\"connection-guide-title\">Connection Guide</span>\r\n                    <IconButton\r\n                        styles={iconButtonStyles}\r\n                        iconProps={{ iconName: \"Cancel\" }}\r\n                        ariaLabel=\"Close\"\r\n                        onClick={() => setModalOpen(false)}\r\n                    />\r\n                </div>\r\n                <div className={contentStyles.body}>\r\n                    <Stack {...stackProps}>\r\n                        <TextField readOnly\r\n                            label=\"Mirakurun Path\"\r\n                            value={`${location.protocol}//${location.host}/`}\r\n                            onMouseOver={selectHandler} onClick={selectHandler}\r\n                        />\r\n                        <TextField readOnly\r\n                            label=\"Open API 2.0 / Swagger 2.0 Compliant Definition\"\r\n                            value={`${location.protocol}//${location.host}/api/docs`}\r\n                            onMouseOver={selectHandler} onClick={selectHandler}\r\n                        />\r\n                        <Separator>IPTV</Separator>\r\n                        <TextField readOnly\r\n                            label=\"M3U Playlist\"\r\n                            value={`${location.protocol}//${location.host}/api/iptv/playlist`}\r\n                            onMouseOver={selectHandler} onClick={selectHandler}\r\n                        />\r\n                        <TextField readOnly\r\n                            label=\"XMLTV\"\r\n                            value={`${location.protocol}//${location.host}/api/iptv/xmltv`}\r\n                            onMouseOver={selectHandler} onClick={selectHandler}\r\n                        />\r\n                        <TextField readOnly\r\n                            label=\"HDHomeRun Device Address\"\r\n                            value={`${location.protocol}//${location.host}/api/iptv`}\r\n                            onMouseOver={selectHandler} onClick={selectHandler}\r\n                            onRenderLabel={(props) => (\r\n                                <Stack horizontal verticalAlign=\"end\">\r\n                                    <Label>{props.label}</Label>\r\n                                    <TooltipHost content=\"Tested on Plex Media Server\">\r\n                                        <Icon\r\n                                            iconName=\"Info\"\r\n                                            style={{ marginLeft: 4, marginBottom: 6 }}\r\n                                        />\r\n                                    </TooltipHost>\r\n                                </Stack>\r\n                            )}\r\n                        />\r\n                        <Separator>Misc</Separator>\r\n                        <TextField readOnly\r\n                            label=\"BonDriver_Mirakurun.ini\"\r\n                            multiline rows={3}\r\n                            value={`[GLOBAL]\\nSERVER_HOST=\"${location.hostname}\"\\nSERVER_PORT=\"${location.port}\"`}\r\n                            onMouseOver={selectHandler} onClick={selectHandler}\r\n                        />\r\n                    </Stack>\r\n                </div>\r\n            </Modal>\r\n            <ActionButton\r\n                iconProps={{ iconName: \"Info\" }}\r\n                text=\"Connection Guide\"\r\n                onClick={() => setModalOpen(true)}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ConnectionGuide;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Client as RPCClient } from \"jsonrpc2-ws\";\r\nimport { JoinParams } from \"../../../lib/Mirakurun/rpc.d\";\r\nimport { Event } from \"../../../api\";\r\nimport \"./Logs.css\";\r\n\r\nlet _itemId = 0;\r\n\r\nlet eventsCache: JSX.Element[] = [];\r\n\r\nconst EventsView: React.FC<{ uiStateEvents: EventEmitter, rpc: RPCClient }> = ({ uiStateEvents, rpc }) => {\r\n\r\n    const [eventList, setEventList] = useState<JSX.Element[]>([]);\r\n    const latestRef = useRef<HTMLDivElement>(null);\r\n\r\n    const onEvents = (events: Event[], unshift: boolean) => {\r\n        const newList: JSX.Element[] = [];\r\n        for (const event of events) {\r\n            newList.push(\r\n                <div key={`events-list-item${_itemId}`} className={`type-${event.type}`}>\r\n                    {`${event.resource} (${event.type}) ${JSON.stringify(event.data)}`}\r\n                </div>\r\n            );\r\n            ++_itemId;\r\n        }\r\n        if (unshift === true) {\r\n            eventsCache = [...newList, ...eventsCache].slice(-200);\r\n        } else {\r\n            eventsCache = [...eventsCache, ...newList].slice(-200);\r\n        }\r\n        setEventList(eventsCache);\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        const join = () => {\r\n            rpc.call(\"join\", { rooms: [\"events:program\"] } as JoinParams);\r\n        };\r\n        rpc.on(\"connected\", join);\r\n        join();\r\n\r\n        (async () => {\r\n            const events: Event[] = await (await fetch(\"/api/events\")).json();\r\n            onEvents(events, true);\r\n        })();\r\n\r\n        uiStateEvents.on(\"data:events\", onEvents);\r\n\r\n        return () => {\r\n            rpc.off(\"connected\", join);\r\n            rpc.call(\"leave\", { rooms: [\"events:program\"] } as JoinParams);\r\n            uiStateEvents.off(\"data:events\", onEvents);\r\n            eventsCache = [];\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        latestRef.current.scrollIntoView();\r\n    });\r\n\r\n    return (\r\n        <div className=\"logs\" style={{ margin: \"8px 0\" }}>\r\n            {eventList}\r\n            <div className=\"latest\" ref={latestRef}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EventsView;\r\n","/*\r\n   Copyright 2021 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport * as React from \"react\";\r\nimport { useState } from \"react\";\r\nimport {\r\n    Stack,\r\n    Separator,\r\n    Text,\r\n    Link,\r\n    PrimaryButton\r\n} from \"@fluentui/react\";\r\nimport \"./HeartView.css\";\r\n\r\nconst HeartView: React.FC = () => {\r\n\r\n    const [consented, setConsented] = useState<boolean>(false);\r\n\r\n    return (\r\n        <Stack tokens={{ childrenGap: \"16 0\" }} style={{ margin: \"16px 0 8px\" }} className=\"heart-view\">\r\n            {consented === false && <>\r\n                <Separator alignContent=\"start\">Confirmation</Separator>\r\n\r\n                <div className=\"consent\">\r\n                    <b>We sincerely thank you for your continued support.</b><br />\r\n                    <br />\r\n                    This page is attempting to retrieve images from your browser\r\n                    by going directly to\r\n                    &nbsp;<Link href=\"https://opencollective.com/\" target=\"_blank\">opencollective.com</Link>&nbsp;\r\n                    in order to display a list of contributors.<br />\r\n                    <br />\r\n                    To view this page, click the \"Continue\" button.\r\n                </div>\r\n\r\n                <div className=\"consent\">\r\n                    <PrimaryButton\r\n                            text=\"Continue\"\r\n                            onClick={() => {\r\n                                setConsented(true);\r\n                            }}\r\n                        />\r\n                </div>\r\n            </>}\r\n\r\n            {consented === true && <>\r\n                <Stack>\r\n                    <Separator alignContent=\"start\">Contributors</Separator>\r\n                    <Text>\r\n                        This project exists thanks to all the people who contribute.\r\n                    </Text>\r\n                    <Text>\r\n                        <Link href=\"https://github.com/Chinachu/Mirakurun/graphs/contributors\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/contributors.svg?width=890&button=false\" /></Link>\r\n                    </Text>\r\n                </Stack>\r\n\r\n                <Stack>\r\n                    <Separator alignContent=\"start\">Backers</Separator>\r\n                    <Text>\r\n                        Thank you to all our backers! \r\n                        [<Link href=\"https://opencollective.com/Mirakurun#backer\" target=\"_blank\">Become a backer</Link>]\r\n                    </Text>\r\n                    <Text>\r\n                        <Link href=\"https://opencollective.com/Mirakurun#backers\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/backers.svg?width=890\" /></Link>\r\n                    </Text>\r\n                </Stack>\r\n\r\n                <Stack>\r\n                    <Separator alignContent=\"start\">Sponsors</Separator>\r\n                    <Text>\r\n                        Support this project by becoming a sponsor. Your logo will show up here with a link to your website.\r\n                        [<Link href=\"https://opencollective.com/Mirakurun#sponsor\" target=\"_blank\">Become a sponsor</Link>]\r\n                    </Text>\r\n                    <Text>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/0/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/0/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/1/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/1/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/2/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/2/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/3/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/3/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/4/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/4/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/5/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/5/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/6/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/6/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/7/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/7/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/8/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/8/avatar.svg\" /></Link>\r\n                        <Link href=\"https://opencollective.com/Mirakurun/sponsor/9/website\" target=\"_blank\"><img src=\"https://opencollective.com/Mirakurun/sponsor/9/avatar.svg\" /></Link>\r\n                    </Text>\r\n                </Stack>\r\n            </>}\r\n        </Stack>\r\n    );\r\n};\r\n\r\nexport default HeartView;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Client as RPCClient } from \"jsonrpc2-ws\";\r\nimport { JoinParams } from \"../../../lib/Mirakurun/rpc.d\";\r\nimport \"./Logs.css\";\r\n\r\nlet _itemId = 0;\r\n\r\nlet logListCache: JSX.Element[] = [];\r\n\r\nconst LogsView: React.FC<{ uiStateEvents: EventEmitter, rpc: RPCClient }> = ({ uiStateEvents, rpc }) => {\r\n\r\n    const [logList, setLogList] = useState<JSX.Element[]>([]);\r\n    const latestRef = useRef<HTMLDivElement>(null);\r\n\r\n    const onLogs = (lines: string[], unshift: boolean) => {\r\n        const newList: JSX.Element[] = [];\r\n        for (const line of lines) {\r\n            const parsed = line.match(/^[0-9.T:+-]+ ([a-z]+): /);\r\n            const level = parsed ? parsed[1] : \"other\";\r\n            newList.push(\r\n                <div key={`logs-list-item${_itemId}`} className={`level-${level}`}>\r\n                    {line}\r\n                </div>\r\n            );\r\n            ++_itemId;\r\n        }\r\n        if (unshift === true) {\r\n            logListCache = [...newList, ...logListCache].slice(-500);\r\n        } else {\r\n            logListCache = [...logListCache, ...newList].slice(-500);\r\n        }\r\n        setLogList(logListCache);\r\n    };\r\n\r\n    useEffect(() => {\r\n\r\n        const join = () => {\r\n            rpc.call(\"join\", { rooms: [\"logs\"] } as JoinParams);\r\n        };\r\n        rpc.on(\"connected\", join);\r\n        join();\r\n\r\n        (async () => {\r\n            const lines: string = await (await fetch(\"/api/log\")).text();\r\n            onLogs(lines.trim().split(\"\\n\"), true);\r\n        })();\r\n\r\n        uiStateEvents.on(\"data:logs\", onLogs);\r\n\r\n        return () => {\r\n            rpc.off(\"connected\", join);\r\n            rpc.call(\"leave\", { rooms: [\"logs\"] } as JoinParams);\r\n            uiStateEvents.off(\"data:logs\", onLogs);\r\n            logListCache = [];\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        latestRef.current.scrollIntoView();\r\n    });\r\n\r\n    return (\r\n        <div className=\"logs\" style={{ margin: \"8px 0\" }}>\r\n            {logList}\r\n            <div className=\"latest\" ref={latestRef}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LogsView;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogFooter,\r\n    DialogType,\r\n    PrimaryButton,\r\n    DefaultButton,\r\n    ActionButton,\r\n    Coachmark,\r\n    TeachingBubbleContent,\r\n    DirectionalHint\r\n} from \"@fluentui/react\";\r\n\r\nconst Restart: React.FC<{ uiStateEvents: EventEmitter }> = ({ uiStateEvents }) => {\r\n\r\n    const [hideDialog, setHideDialog] = useState<boolean>(true);\r\n    const [restartRequired, setRestartRequired] = useState<boolean>(false);\r\n    const targetButton = useRef<HTMLDivElement>();\r\n\r\n    useEffect(() => {\r\n        const onRestartRequired = () => {\r\n            setRestartRequired(true);\r\n        };\r\n        uiStateEvents.on(\"notify:restart-required\", onRestartRequired);\r\n        return () => {\r\n            uiStateEvents.off(\"notify:restart-required\", onRestartRequired);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Dialog\r\n                hidden={hideDialog}\r\n                onDismiss={() => setHideDialog(true)}\r\n                dialogContentProps={{\r\n                    type: DialogType.largeHeader,\r\n                    title: \"Restart Mirakurun\",\r\n                    subText: \"Do you want to restart Mirakurun?\"\r\n                }}\r\n            >\r\n                <DialogFooter>\r\n                    <PrimaryButton\r\n                        text=\"Restart\"\r\n                        onClick={() => {\r\n                            (async () => {\r\n                                await fetch(`/api/restart`, { method: \"PUT\" });\r\n                            })();\r\n                            setHideDialog(true);\r\n                            setRestartRequired(false);\r\n                        }}\r\n                    />\r\n                    <DefaultButton\r\n                        text=\"Cancel\"\r\n                        onClick={() => setHideDialog(true)}\r\n                    />\r\n                </DialogFooter>\r\n            </Dialog>\r\n            {restartRequired && (\r\n                <Coachmark\r\n                    target={targetButton.current}\r\n                    onDismiss={() => setRestartRequired(false)}\r\n                    positioningContainerProps={{\r\n                        directionalHint: DirectionalHint.leftCenter,\r\n                        doNotLayer: false,\r\n                    }}\r\n                >\r\n                    <TeachingBubbleContent\r\n                        hasCloseButton\r\n                        onDismiss={() => setRestartRequired(false)}\r\n                    >\r\n                        Restart is required to apply configuration.\r\n                    </TeachingBubbleContent>\r\n                </Coachmark>\r\n            )}\r\n            <div ref={targetButton}>\r\n                <ActionButton\r\n                    iconProps={{ iconName: \"Sync\" }}\r\n                    text=\"Restart\"\r\n                    onClick={() => setHideDialog(false)}\r\n                />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Restart;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n    Stack,\r\n    Separator,\r\n    Spinner,\r\n    SpinnerSize,\r\n    Dropdown,\r\n    TooltipHost,\r\n    Icon,\r\n    Label,\r\n    TextField,\r\n    PrimaryButton,\r\n    DefaultButton,\r\n    Toggle,\r\n    Dialog,\r\n    DialogType,\r\n    DialogFooter,\r\n} from \"@fluentui/react\";\r\nimport { Validator as IPValidator } from \"ip-num/Validator\"\r\nimport { UIState } from \"../index\";\r\nimport { ConfigServer } from \"../../../api\";\r\n\r\nconst configAPI = \"/api/config/server\";\r\n\r\nconst Configurator: React.FC<{ uiState: UIState, uiStateEvents: EventEmitter }> = ({ uiState, uiStateEvents }) => {\r\n\r\n    const [current, setCurrent] = useState<ConfigServer>(null);\r\n    const [editing, setEditing] = useState<ConfigServer>(null);\r\n    const [showSaveDialog, setShowSaveDialog] = useState<boolean>(false);\r\n    const [saved, setSaved] = useState<boolean>(false);\r\n\r\n    useEffect(() => {\r\n        if (saved === true) {\r\n            setTimeout(() => {\r\n                uiStateEvents.emit(\"notify:restart-required\");\r\n            }, 500);\r\n            setSaved(false);\r\n            return;\r\n        }\r\n        (async () => {\r\n            try {\r\n                const res = await (await fetch(configAPI)).json();\r\n                console.log(\"ServerConfigurator\", \"GET\", configAPI, \"->\", res);\r\n                setEditing({ ...res });\r\n                setCurrent({ ...res });\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        })();\r\n    }, [saved]);\r\n\r\n    const docker = uiState.status.process.env.DOCKER === \"YES\";\r\n    const ipv6Ready = docker === false || uiState.status.process.env.DOCKER_NETWORK === \"host\";\r\n    const changed = JSON.stringify(current) !== JSON.stringify(editing);\r\n\r\n    let invalid = false;\r\n    if (editing) {\r\n        if (editing.allowIPv4CidrRanges) {\r\n            for (const range of editing.allowIPv4CidrRanges) {\r\n                const [valid] = IPValidator.isValidIPv4CidrRange(range);\r\n                if (!valid) {\r\n                    invalid = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (!invalid && editing.allowIPv6CidrRanges) {\r\n            for (const range of editing.allowIPv6CidrRanges) {\r\n                const [valid] = IPValidator.isValidIPv6CidrRange(range);\r\n                if (!valid) {\r\n                    invalid = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!current && <Spinner size={SpinnerSize.large} />}\r\n            {editing &&\r\n                <Stack tokens={{ childrenGap: \"8 0\" }}>\r\n                    <Dropdown\r\n                        label=\"LogLevel\"\r\n                        styles={{ dropdown: { display: \"inline-block\" } }}\r\n                        disabled={docker && typeof uiState.status.process.env.LOG_LEVEL === \"string\"}\r\n                        onRenderLabel={(props) => (\r\n                            <Stack horizontal verticalAlign=\"end\">\r\n                                <Label>{props.label}</Label>\r\n                                <TooltipHost content=\"If running in Docker, Env var `LOG_LEVEL` is preferred.\">\r\n                                    <Icon\r\n                                        iconName=\"Info\"\r\n                                        style={{ marginLeft: 4, marginBottom: 6 }}\r\n                                    />\r\n                                </TooltipHost>\r\n                            </Stack>\r\n                        )}\r\n                        options={[\r\n                            { key: -1, text: \"FATAL (-1)\" },\r\n                            { key: 0, text: \"ERROR (0)\" },\r\n                            { key: 1, text: \"WARN (1)\" },\r\n                            { key: 2, text: \"INFO (2)\" }, // default\r\n                            { key: 3, text: \"DEBUG (3)\" },\r\n                        ]}\r\n                        selectedKey={editing?.logLevel === undefined ? 2 : editing?.logLevel}\r\n                        onChange={(ev, option: any) => {\r\n                            setEditing({ ...editing, logLevel: option.key });\r\n                        }}\r\n                    />\r\n\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"Hostname\"\r\n                        value={editing.hostname}\r\n                        onChange={(ev, newValue) => {\r\n                            setEditing({ ...editing, hostname: newValue });\r\n                        }}\r\n                    />\r\n\r\n                    <Toggle\r\n                        label=\"IPv6\"\r\n                        disabled={!ipv6Ready}\r\n                        checked={(ipv6Ready && (editing.disableIPv6 === undefined || editing.disableIPv6 === false))}\r\n                        onText=\"Enable\"\r\n                        offText=\"Disable\"\r\n                        onChange={(ev, checked) => {\r\n                            setEditing({ ...editing, disableIPv6: checked === false });\r\n                        }}\r\n                    />\r\n\r\n                    <Separator alignContent=\"start\">Advanced</Separator>\r\n\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"EPG Gathering Interval (Global)\"\r\n                        suffix=\"ms\"\r\n                        placeholder=\"1800000\"\r\n                        value={`${editing.epgGatheringInterval || \"\"}`}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue === \"\") {\r\n                                delete editing.epgGatheringInterval;\r\n                            } else if (/^[0-9]+$/.test(newValue)) {\r\n                                const int = parseInt(newValue, 10);\r\n                                if (int <= 1000 * 60 * 60 * 24 * 3 && int > 0) {\r\n                                    editing.epgGatheringInterval = int;\r\n                                }\r\n                            }\r\n                            setEditing({ ...editing });\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"EPG Gathering Interval (GR)\"\r\n                        suffix=\"ms\"\r\n                        placeholder=\"1800000\"\r\n                        value={`${editing.epgGatheringIntervalGR || \"\"}`}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue === \"\") {\r\n                                delete editing.epgGatheringIntervalGR;\r\n                            } else if (/^[0-9]+$/.test(newValue)) {\r\n                                const int = parseInt(newValue, 10);\r\n                                if (int <= 1000 * 60 * 60 * 24 * 3 && int > 0) {\r\n                                    editing.epgGatheringIntervalGR = int;\r\n                                }\r\n                            }\r\n                            setEditing({ ...editing });\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"EPG Gathering Interval (BS)\"\r\n                        suffix=\"ms\"\r\n                        placeholder=\"1800000\"\r\n                        value={`${editing.epgGatheringIntervalBS || \"\"}`}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue === \"\") {\r\n                                delete editing.epgGatheringIntervalBS;\r\n                            } else if (/^[0-9]+$/.test(newValue)) {\r\n                                const int = parseInt(newValue, 10);\r\n                                if (int <= 1000 * 60 * 60 * 24 * 3 && int > 0) {\r\n                                    editing.epgGatheringIntervalBS = int;\r\n                                }\r\n                            }\r\n                            setEditing({ ...editing });\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"EPG Gathering Interval (CS)\"\r\n                        suffix=\"ms\"\r\n                        placeholder=\"1800000\"\r\n                        value={`${editing.epgGatheringIntervalCS || \"\"}`}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue === \"\") {\r\n                                delete editing.epgGatheringIntervalCS;\r\n                            } else if (/^[0-9]+$/.test(newValue)) {\r\n                                const int = parseInt(newValue, 10);\r\n                                if (int <= 1000 * 60 * 60 * 24 * 3 && int > 0) {\r\n                                    editing.epgGatheringIntervalCS = int;\r\n                                }\r\n                            }\r\n                            setEditing({ ...editing });\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"EPG Gathering Interval (SKY)\"\r\n                        suffix=\"ms\"\r\n                        placeholder=\"1800000\"\r\n                        value={`${editing.epgGatheringIntervalSKY || \"\"}`}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue === \"\") {\r\n                                delete editing.epgGatheringIntervalSKY;\r\n                            } else if (/^[0-9]+$/.test(newValue)) {\r\n                                const int = parseInt(newValue, 10);\r\n                                if (int <= 1000 * 60 * 60 * 24 * 3 && int > 0) {\r\n                                    editing.epgGatheringIntervalSKY = int;\r\n                                }\r\n                            }\r\n                            setEditing({ ...editing });\r\n                        }}\r\n                    />\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"EPG Gathering Interval (NW)\"\r\n                        suffix=\"ms\"\r\n                        placeholder=\"1800000\"\r\n                        value={`${editing.epgGatheringIntervalNW || \"\"}`}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue === \"\") {\r\n                                delete editing.epgGatheringIntervalNW;\r\n                            } else if (/^[0-9]+$/.test(newValue)) {\r\n                                const int = parseInt(newValue, 10);\r\n                                if (int <= 1000 * 60 * 60 * 24 * 3 && int > 0) {\r\n                                    editing.epgGatheringIntervalNW = int;\r\n                                }\r\n                            }\r\n                            setEditing({ ...editing });\r\n                        }}\r\n                    />\r\n\r\n                    <Toggle\r\n                        label={\r\n                            <Stack horizontal verticalAlign=\"end\">\r\n                                <Label>EIT Parsing</Label>\r\n                                <TooltipHost content={\r\n                                    `If running in Docker, Env var \\`DISABLE_EIT_PARSING\\` is preferred.\r\n                                     If disabled, won't work some clients!`\r\n                                }>\r\n                                    <Icon\r\n                                        iconName=\"Info\"\r\n                                        style={{ marginLeft: 4, marginBottom: 6 }}\r\n                                    />\r\n                                </TooltipHost>\r\n                            </Stack>\r\n                        }\r\n                        checked={(editing.disableEITParsing === undefined || editing.disableEITParsing === false)}\r\n                        onText=\"Enable\"\r\n                        offText=\"Disable \"\r\n                        onChange={(ev, checked) => {\r\n                            setEditing({ ...editing, disableEITParsing: checked === false ? true : undefined })\r\n                        }}\r\n                    />\r\n\r\n                    <Toggle\r\n                        label={\r\n                            <Stack horizontal verticalAlign=\"end\">\r\n                                <Label>Allow Listen All Interface</Label>\r\n                                <TooltipHost content={\r\n                                    `If enabled, it allows access from all interfaces. Be careful when enabling.`\r\n                                }>\r\n                                    <Icon\r\n                                        iconName=\"Info\"\r\n                                        style={{ marginLeft: 4, marginBottom: 6 }}\r\n                                    />\r\n                                </TooltipHost>\r\n                            </Stack>\r\n                        }\r\n                        checked={(editing.allowListenAllInterface === undefined || editing.allowListenAllInterface === false)}\r\n                        onText=\"Enable\"\r\n                        offText=\"Disable\"\r\n                        onChange={(ev, checked) => {\r\n                            setEditing({ ...editing, allowListenAllInterface: checked === false ? true : undefined })\r\n                        }}\r\n                    />\r\n\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 200 } }}\r\n                        label=\"Allow IPv4 CIDR Ranges\"\r\n                        onRenderLabel={(props) => (\r\n                            <Stack horizontal verticalAlign=\"end\">\r\n                                <Label>{props.label}</Label>\r\n                                <TooltipHost content={\r\n                                    `If running in Docker, Env var \\`ALLOW_IPV4_CIDR_RANGES\\` is preferred.\r\n                                     Maximum attention required!`\r\n                                }>\r\n                                    <Icon\r\n                                        iconName=\"Warning\"\r\n                                        style={{ marginLeft: 4, marginBottom: 6 }}\r\n                                    />\r\n                                </TooltipHost>\r\n                            </Stack>\r\n                        )}\r\n                        multiline rows={3}\r\n                        value={(editing.allowIPv4CidrRanges || []).join(\"\\n\")}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue.trim() === \"\") {\r\n                                setEditing({ ...editing, allowIPv4CidrRanges: null });\r\n                            } else {\r\n                                setEditing({ ...editing, allowIPv4CidrRanges: newValue.split(\"\\n\").map(range => range.trim()) })\r\n                            }\r\n                        }}\r\n                    />\r\n\r\n                    <TextField\r\n                        styles={{ fieldGroup: { \"max-width\": 380 } }}\r\n                        label=\"Allow IPv6 CIDR Ranges\"\r\n                        onRenderLabel={(props) => (\r\n                            <Stack horizontal verticalAlign=\"end\">\r\n                                <Label>{props.label}</Label>\r\n                                <TooltipHost content={\r\n                                    `If running in Docker, Env var \\`ALLOW_IPV6_CIDR_RANGES\\` is preferred.\r\n                                     Maximum attention required!`\r\n                                }>\r\n                                    <Icon\r\n                                        iconName=\"Warning\"\r\n                                        style={{ marginLeft: 4, marginBottom: 6 }}\r\n                                    />\r\n                                </TooltipHost>\r\n                            </Stack>\r\n                        )}\r\n                        multiline rows={3}\r\n                        value={(editing.allowIPv6CidrRanges || []).join(\"\\n\")}\r\n                        onChange={(ev, newValue) => {\r\n                            if (newValue.trim() === \"\") {\r\n                                setEditing({ ...editing, allowIPv6CidrRanges: null });\r\n                            } else {\r\n                                setEditing({ ...editing, allowIPv6CidrRanges: newValue.split(\"\\n\").map(range => range.trim()) })\r\n                            }\r\n                        }}\r\n                    />\r\n\r\n                    <Stack horizontal tokens={{ childrenGap: \"0 8\" }} style={{ marginTop: 16 }}>\r\n                        <PrimaryButton text=\"Save\" disabled={!changed || invalid} onClick={() => setShowSaveDialog(true)} />\r\n                        <DefaultButton text=\"Cancel\" disabled={!changed} onClick={() => setEditing({ ...current })} />\r\n                    </Stack>\r\n                </Stack>\r\n            }\r\n            <Dialog\r\n                hidden={!showSaveDialog}\r\n                onDismiss={() => setShowSaveDialog(false)}\r\n                dialogContentProps={{\r\n                    type: DialogType.largeHeader,\r\n                    title: \"Save\",\r\n                    subText: \"Restart is required to apply configuration.\"\r\n                }}\r\n            >\r\n                <DialogFooter>\r\n                    <PrimaryButton\r\n                        text=\"Save\"\r\n                        onClick={() => {\r\n                            setShowSaveDialog(false);\r\n                            (async () => {\r\n                                for (const key of Object.keys(editing)) {\r\n                                    if (editing[key] === null) {\r\n                                        delete editing[key];\r\n                                    }\r\n                                }\r\n                                console.log(\"ServerConfigurator\", \"PUT\", configAPI, \"<-\", editing);\r\n                                await fetch(configAPI, {\r\n                                    method: \"PUT\",\r\n                                    headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\r\n                                    body: JSON.stringify(editing)\r\n                                });\r\n                                setSaved(true);\r\n                            })();\r\n                        }}\r\n                    />\r\n                    <DefaultButton\r\n                        text=\"Cancel\"\r\n                        onClick={() => setShowSaveDialog(false)}\r\n                    />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Configurator;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n    Stack,\r\n    Separator,\r\n    Icon,\r\n    TooltipHost,\r\n    ITooltipHostStyles,\r\n    ITooltipProps\r\n} from \"@fluentui/react\";\r\nimport { UIState } from \"../index\";\r\nimport TunersManager from \"./TunersManager\";\r\n\r\ninterface StatusItem {\r\n    label: string;\r\n    text: string;\r\n}\r\n\r\nconst calloutProps = { gapSpace: 0 };\r\nconst tooltipHostStyles: Partial<ITooltipHostStyles> = {\r\n    root: {\r\n        display: \"inline-block\",\r\n    }\r\n};\r\nconst tooltipProps: Partial<ITooltipProps> = {\r\n    styles: {\r\n        content: {\r\n            whiteSpace: \"pre\"\r\n        }\r\n    }\r\n};\r\n\r\nconst StatusView: React.FC<{ uiState: UIState, uiStateEvents: EventEmitter }> = ({ uiState, uiStateEvents }) => {\r\n\r\n    const [status, setStatus] = useState<UIState[\"status\"]>(uiState.status);\r\n    const [services, setServices] = useState<UIState[\"services\"]>(uiState.services);\r\n    const [tuners, setTuners] = useState<UIState[\"tuners\"]>(uiState.tuners);\r\n\r\n    useEffect(() => {\r\n\r\n        const onStatusUpdate = () => {\r\n            setStatus({ ...uiState.status });\r\n        };\r\n        uiStateEvents.on(\"update:status\", onStatusUpdate);\r\n\r\n        const onServicesUpdate = () => {\r\n            setServices([ ...uiState.services ]);\r\n        };\r\n        uiStateEvents.on(\"update:services\", onServicesUpdate);\r\n\r\n        const onTunersUpdate = () => {\r\n            setTuners([ ...uiState.tuners ]);\r\n        };\r\n        uiStateEvents.on(\"update:tuners\", onTunersUpdate);\r\n\r\n        return () => {\r\n            uiStateEvents.off(\"update:status\", onStatusUpdate);\r\n            uiStateEvents.off(\"update:services\", onServicesUpdate);\r\n            uiStateEvents.off(\"update:tuners\", onTunersUpdate);\r\n        };\r\n    }, []);\r\n\r\n    const statusItem: StatusItem[] = [];\r\n\r\n    if (status) {\r\n        const dockerStat = status.process?.env?.DOCKER === \"YES\" ? \"\" : \"\";\r\n        statusItem.push({ label: \"Platform\", text: `${status.process?.platform} (${status.process?.arch}) ${dockerStat}` });\r\n        statusItem.push({ label: \"Node.js Version\", text: status.process?.versions?.node });\r\n        statusItem.push({ label: \"Memory (RSS)\", text: `${Math.round(status.process?.memoryUsage?.rss / 1024 / 1024)} MB` });\r\n        statusItem.push({ label: \"EPG Gathering Network IDs\", text: status.epg.gatheringNetworks.map(id => `0x${id.toString(16).toUpperCase()}`).join(\", \") });\r\n        statusItem.push({ label: \"EPG Stored Events\", text: `${status.epg.storedEvents} Events` });\r\n        statusItem.push({ label: \"TunerDevice Streams\", text: `${status.streamCount.tunerDevice}` });\r\n        statusItem.push({ label: \"TSFilter Streams\", text: `${status.streamCount.tsFilter}` });\r\n        statusItem.push({ label: \"Decoder Streams\", text: `${status.streamCount.decoder}` });\r\n        statusItem.push({ label: \"RPC Connections\", text: `${status.rpcCount}` });\r\n    }\r\n\r\n    const statusList: JSX.Element[] = [];\r\n    for (let i = 0; i < statusItem.length; i++) {\r\n        const item = statusItem[i];\r\n        statusList.push(\r\n            <div key={`status-list-item${i}`} className=\"ms-Grid-col ms-sm12 ms-xl6 ms-xxl4 ms-xxxl3\">\r\n                <div className=\"ms-Grid\" style={{ margin: 4 }}>\r\n                    <div className=\"ms-Grid-row\">\r\n                        <div className=\"ms-Grid-col ms-sm6\"><span className=\"ms-fontWeight-semibold\">{item.label}</span></div>\r\n                        <div className=\"ms-Grid-col ms-sm6\"><span>{item.text}</span></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const serviceList: JSX.Element[] = [];\r\n    for (let i = 0; i < services.length; i++) {\r\n        const service = services[i];\r\n        if (service.type !== 1 && service.type !== 173) {\r\n            continue;\r\n        }\r\n        const tooltipId = `service-list-item#${i}-tooltip`;\r\n        serviceList.push(\r\n            <div key={`service-list-item${i}`} className=\"ms-Grid-col ms-sm6 ms-xl3 ms-xxl2\">\r\n                <TooltipHost\r\n                    id={tooltipId}\r\n                    calloutProps={calloutProps}\r\n                    styles={tooltipHostStyles}\r\n                    tooltipProps={tooltipProps}\r\n                    content={(\r\n                        `#${service.id}\\n` +\r\n                        `SID: 0x${service.serviceId.toString(16).toUpperCase()} (${service.serviceId})\\n` +\r\n                        `NID: 0x${service.networkId.toString(16).toUpperCase()} (${service.networkId})\\n` +\r\n                        `Channel: ${service.channel.type} / ${service.channel.channel}`\r\n                    )}\r\n                >\r\n                    <div className=\"ms-Grid\" area-describeby={tooltipId} style={{ margin: 4 }}>\r\n                        <div className=\"ms-Grid-row\" style={{\r\n                            padding: 1,\r\n                            height: 24,\r\n                            backgroundSize: \"contain\",\r\n                            backgroundRepeat: \"no-repeat\",\r\n                            backgroundImage: service.hasLogoData && `url(/api/services/${service.id}/logo)`\r\n                        }}>\r\n                            <div className=\"ms-Grid-col ms-sm12\" style={{ paddingLeft: 50 }}>\r\n                                <span className=\"ms-fontWeight-semibold ms-fontSize-12\">\r\n                                    {service.name}\r\n                                </span>\r\n                                <span style={{ marginLeft: 4, fontSize: 13, verticalAlign: \"middle\" }}>\r\n                                    {\r\n                                        status.epg.gatheringNetworks.includes(service.networkId) && <Icon iconName=\"Sync\" style={{ color: \"#f6ad49\" }} /> ||\r\n                                        service.epgReady && <Icon iconName=\"CheckMark\" style={{ color: \"#c3d825\" }} /> ||\r\n                                        <Icon iconName=\"Clock\" style={{ color: \"#777\" }} />\r\n                                    }\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </TooltipHost>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Stack tokens={{ childrenGap: \"16 0\" }} style={{ margin: \"16px 0 8px\" }}>\r\n            <Stack>\r\n                <Separator alignContent=\"start\">Status</Separator>\r\n                <div className=\"ms-Grid\" dir=\"ltr\">\r\n                    <div className=\"ms-Grid-row\">\r\n                        {statusList}\r\n                    </div>\r\n                </div>\r\n            </Stack>\r\n            <Stack>\r\n                <Separator alignContent=\"start\">Services</Separator>\r\n                <div className=\"ms-Grid\" dir=\"ltr\" style={{ marginLeft: 8 }}>\r\n                    <div className=\"ms-Grid-row\">\r\n                        {serviceList}\r\n                    </div>\r\n                </div>\r\n            </Stack>\r\n            <Stack>\r\n                <Separator alignContent=\"start\">Tuners</Separator>\r\n                <TunersManager tuners={tuners} />\r\n            </Stack>\r\n        </Stack>\r\n    );\r\n};\r\n\r\nexport default StatusView;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n    Stack,\r\n    Spinner,\r\n    SpinnerSize,\r\n    DetailsList,\r\n    Selection,\r\n    SelectionMode,\r\n    IColumn,\r\n    Dropdown,\r\n    PrimaryButton,\r\n    DefaultButton,\r\n    Toggle,\r\n    Dialog,\r\n    DialogType,\r\n    DialogFooter,\r\n    TextField,\r\n    Checkbox,\r\n    IconButton,\r\n    ActionButton\r\n} from \"@fluentui/react\";\r\nimport { UIState } from \"../index\";\r\nimport { ConfigTuners, ChannelType } from \"../../../api\";\r\n\r\nconst configAPI = \"/api/config/tuners\";\r\n\r\ninterface Item {\r\n    key: string;\r\n    enable: JSX.Element;\r\n    name: JSX.Element;\r\n    types: JSX.Element;\r\n    options: JSX.Element;\r\n    controls: JSX.Element;\r\n}\r\n\r\nconst columns: IColumn[] = [\r\n    {\r\n        key: \"col-enable\",\r\n        name: \"Enable\",\r\n        fieldName: \"enable\",\r\n        minWidth: 44,\r\n        maxWidth: 44\r\n    },\r\n    {\r\n        key: \"col-name\",\r\n        name: \"Name\",\r\n        fieldName: \"name\",\r\n        minWidth: 0,\r\n        maxWidth: 70\r\n    },\r\n    {\r\n        key: \"col-types\",\r\n        name: \"Types\",\r\n        fieldName: \"types\",\r\n        minWidth: 60,\r\n        maxWidth: 105\r\n    },\r\n    {\r\n        key: \"col-options\",\r\n        name: \"Options\",\r\n        fieldName: \"options\",\r\n        minWidth: 340,\r\n        // maxWidth: 400\r\n    },\r\n    {\r\n        key: \"col-controls\",\r\n        name: \"\",\r\n        fieldName: \"controls\",\r\n        minWidth: 120,\r\n        maxWidth: 120\r\n    }\r\n];\r\n\r\nconst dummySelection = new Selection(); // dummy\r\n\r\nconst typesIndex = [\"GR\", \"BS\", \"CS\", \"SKY\", \"NW1\", \"NW2\", \"NW3\", \"NW4\", \"NW5\", \"NW6\", \"NW7\", \"NW8\", \"NW9\", \"NW10\", \"NW11\", \"NW12\", \"NW13\", \"NW14\", \"NW15\", \"NW16\", \"NW17\", \"NW18\", \"NW19\", \"NW20\"];\r\nfunction sortTypes(types: ChannelType[]): ChannelType[] {\r\n    return types.sort((a, b) => typesIndex.indexOf(a) - typesIndex.indexOf(b));\r\n}\r\n\r\nconst Configurator: React.FC<{ uiState: UIState, uiStateEvents: EventEmitter }> = ({ uiState, uiStateEvents }) => {\r\n\r\n    const [current, setCurrent] = useState<ConfigTuners>(null);\r\n    const [editing, setEditing] = useState<ConfigTuners>(null);\r\n    const [showSaveDialog, setShowSaveDialog] = useState<boolean>(false);\r\n    const [saved, setSaved] = useState<boolean>(false);\r\n    const listContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    useEffect(() => {\r\n        if (saved === true) {\r\n            setTimeout(() => {\r\n                uiStateEvents.emit(\"notify:restart-required\");\r\n            }, 500);\r\n            setSaved(false);\r\n            return;\r\n        }\r\n        (async () => {\r\n            try {\r\n                const res = await (await fetch(configAPI)).json();\r\n                console.log(\"TunersConfigurator\", \"GET\", configAPI, \"->\", res);\r\n                setEditing(JSON.parse(JSON.stringify(res)));\r\n                setCurrent(JSON.parse(JSON.stringify(res)));\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        })();\r\n    }, [saved]);\r\n\r\n    const items = [];\r\n    editing?.forEach((tuner, i) => {\r\n        const item: Item = {\r\n            key: `item${i}`,\r\n            enable: (\r\n                <Toggle\r\n                    checked={!tuner.isDisabled}\r\n                    onChange={(ev, checked) => {\r\n                        tuner.isDisabled = !checked;\r\n                        setEditing([...editing]);\r\n                    }}\r\n                    style={{ marginTop: 6 }}\r\n                />\r\n            ),\r\n            name: (\r\n                <TextField\r\n                    value={tuner.name}\r\n                    onChange={(ev, newValue) => {\r\n                        tuner.name = newValue;\r\n                        setEditing([...editing]);\r\n                    }}\r\n                />\r\n            ),\r\n            types: (\r\n                <Dropdown\r\n                    styles={{ root: { display: \"inline-block\", minWidth: 70 } }}\r\n                    multiSelect\r\n                    options={[\r\n                        { key: \"GR\", text: \"GR\" },\r\n                        { key: \"BS\", text: \"BS\" },\r\n                        { key: \"CS\", text: \"CS\" },\r\n                        { key: \"SKY\", text: \"SKY\" },\r\n                        { key: \"NW1\", text: \"NW1\" },\r\n                        { key: \"NW2\", text: \"NW2\" },\r\n                        { key: \"NW3\", text: \"NW3\" },\r\n                        { key: \"NW4\", text: \"NW4\" },\r\n                        { key: \"NW5\", text: \"NW5\" },\r\n                        { key: \"NW6\", text: \"NW6\" },\r\n                        { key: \"NW7\", text: \"NW7\" },\r\n                        { key: \"NW8\", text: \"NW8\" },\r\n                        { key: \"NW9\", text: \"NW9\" },\r\n                        { key: \"NW10\", text: \"NW10\" },\r\n                        { key: \"NW11\", text: \"NW11\" },\r\n                        { key: \"NW12\", text: \"NW12\" },\r\n                        { key: \"NW13\", text: \"NW13\" },\r\n                        { key: \"NW14\", text: \"NW14\" },\r\n                        { key: \"NW15\", text: \"NW15\" },\r\n                        { key: \"NW16\", text: \"NW16\" },\r\n                        { key: \"NW17\", text: \"NW17\" },\r\n                        { key: \"NW18\", text: \"NW18\" },\r\n                        { key: \"NW19\", text: \"NW19\" },\r\n                        { key: \"NW20\", text: \"NW20\" }\r\n                    ]}\r\n                    selectedKeys={tuner.types}\r\n                    onChange={(ev, option) => {\r\n                        if (option.selected === true) {\r\n                            tuner.types.push(option.key as any);\r\n                            tuner.types = sortTypes(tuner.types);\r\n                        } else {\r\n                            tuner.types = tuner.types.filter(type => type !== option.key);\r\n                        }\r\n                        setEditing([...editing]);\r\n                    }}\r\n                />\r\n            ),\r\n            options: (\r\n                <Stack tokens={{ childrenGap: \"8 0\" }}>\r\n                    {!tuner.remoteMirakurunHost && (\r\n                        <>\r\n                            <TextField\r\n                                label=\"Command:\"\r\n                                value={tuner.command || \"\"}\r\n                                onChange={(ev, newValue) => {\r\n                                    if (newValue === \"\") {\r\n                                        delete tuner.command;\r\n                                    } else {\r\n                                        tuner.command = newValue;\r\n                                    }\r\n                                    setEditing([...editing]);\r\n                                }}\r\n                            />\r\n                            <TextField\r\n                                label=\"DVB Device Path:\"\r\n                                value={tuner.dvbDevicePath || \"\"}\r\n                                onChange={(ev, newValue) => {\r\n                                    if (newValue === \"\") {\r\n                                        delete tuner.dvbDevicePath;\r\n                                    } else {\r\n                                        tuner.dvbDevicePath = newValue;\r\n                                    }\r\n                                    setEditing([...editing]);\r\n                                }}\r\n                            />\r\n                        </>\r\n                    )}\r\n                    {!tuner.command && (\r\n                        <Stack horizontal tokens={{ childrenGap: \"0 8\" }}>\r\n                            <TextField\r\n                                label=\"Remote Mirakurun Host:\"\r\n                                value={tuner.remoteMirakurunHost || \"\"}\r\n                                onChange={(ev, newValue) => {\r\n                                    if (newValue === \"\") {\r\n                                        delete tuner.remoteMirakurunHost;\r\n                                    } else if (/^[0-9a-z\\.]+$/.test(newValue)) {\r\n                                        tuner.remoteMirakurunHost = newValue;\r\n                                    }\r\n                                    setEditing([...editing]);\r\n                                }}\r\n                            />\r\n                            <TextField\r\n                                style={{ width: 55 }}\r\n                                label=\"Port:\"\r\n                                placeholder=\"40772\"\r\n                                value={`${tuner.remoteMirakurunPort || \"\"}`}\r\n                                onChange={(ev, newValue) => {\r\n                                    if (newValue === \"\") {\r\n                                        delete tuner.remoteMirakurunPort;\r\n                                    } else if (/^[0-9]+$/.test(newValue)) {\r\n                                        const port = parseInt(newValue, 10);\r\n                                        if (port <= 65535 && port > 0) {\r\n                                            tuner.remoteMirakurunPort = port;\r\n                                        }\r\n                                    }\r\n                                    setEditing([...editing]);\r\n                                }}\r\n                            />\r\n                            <Checkbox\r\n                                styles={{ root: { marginTop: 34 } }}\r\n                                label=\"Decode\"\r\n                                checked={tuner.remoteMirakurunDecoder || false}\r\n                                onChange={(ev, checked) => {\r\n                                    if (checked) {\r\n                                        tuner.remoteMirakurunDecoder = true;\r\n                                    } else {\r\n                                        delete tuner.remoteMirakurunDecoder;\r\n                                    }\r\n                                    setEditing([...editing]);\r\n                                }}\r\n                            />\r\n                        </Stack>\r\n                    )}\r\n                    {(!tuner.remoteMirakurunHost || !tuner.remoteMirakurunDecoder) && (\r\n                        <TextField\r\n                            label=\"Decoder:\"\r\n                            value={tuner.decoder || \"\"}\r\n                            onChange={(ev, newValue) => {\r\n                                if (newValue === \"\") {\r\n                                    delete tuner.decoder;\r\n                                } else {\r\n                                    tuner.decoder = newValue;\r\n                                }\r\n                                setEditing([...editing]);\r\n                            }}\r\n                        />\r\n                    )}\r\n                </Stack>\r\n            ),\r\n            controls: (\r\n                <Stack horizontal horizontalAlign=\"end\">\r\n                    <IconButton\r\n                        disabled={i === 0}\r\n                        style={{ opacity: i === 0 ? 0 : 1 }}\r\n                        title=\"Up\"\r\n                        iconProps={{ iconName: \"Up\" }}\r\n                        onClick={() => {\r\n                            editing.splice(i, 1);\r\n                            editing.splice(i - 1, 0, tuner);\r\n                            setEditing([...editing]);\r\n                        }}\r\n                    />\r\n                    <IconButton\r\n                        disabled={i === editing.length - 1}\r\n                        style={{ opacity: i === editing.length - 1 ? 0 : 1 }}\r\n                        title=\"Down\"\r\n                        iconProps={{ iconName: \"Down\" }}\r\n                        onClick={() => {\r\n                            editing.splice(i, 1);\r\n                            editing.splice(i + 1, 0, tuner);\r\n                            setEditing([...editing]);\r\n                        }}\r\n                    />\r\n                    <IconButton\r\n                        title=\"Controls\"\r\n                        iconProps={{ iconName: \"More\" }}\r\n                        menuProps={{ items: [{\r\n                            key: \"remove\",\r\n                            text: \"Remove Tuner\",\r\n                            iconProps: { iconName: \"Delete\" },\r\n                            onClick: () => {\r\n                                editing.splice(i, 1);\r\n                                setEditing([...editing]);\r\n                            }\r\n                        }] }}\r\n                    />\r\n                </Stack>\r\n            )\r\n        };\r\n        //\r\n        items.push(item);\r\n    });\r\n\r\n    const changed = JSON.stringify(current) !== JSON.stringify(editing);\r\n\r\n    if (listContainerRef.current) {\r\n        listContainerRef.current.style.maxHeight = \"calc(100vh - 410px)\";\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!current && <Spinner size={SpinnerSize.large} />}\r\n            {editing &&\r\n                <Stack tokens={{ childrenGap: \"8 0\" }}>\r\n                    <Stack.Item>\r\n                        <ActionButton\r\n                            text=\"Add Tuner\"\r\n                            iconProps={{ iconName: \"Add\" }}\r\n                            onClick={() => {\r\n                                const i = editing.length;\r\n                                editing.push({\r\n                                    name: `adapter${i}`,\r\n                                    types: [],\r\n                                    command: `dvbv5-zap -a ${i} -c ./config/dvbconf-for-isdb/conf/dvbv5_channels_isdbs.conf -r -P <channel>`,\r\n                                    dvbDevicePath: `/dev/dvb/adapter${i}/dvr0`,\r\n                                    decoder: \"arib-b25-stream-test\",\r\n                                    isDisabled: true\r\n                                });\r\n                                setEditing([...editing]);\r\n                                setTimeout(() => {\r\n                                    listContainerRef.current.scrollTop = listContainerRef.current.scrollHeight;\r\n                                }, 0);\r\n                            }}\r\n                        />\r\n                    </Stack.Item>\r\n\r\n                    <div ref={listContainerRef} style={{ overflowY: \"scroll\" }}>\r\n                        <DetailsList\r\n                            setKey=\"items\"\r\n                            items={items}\r\n                            columns={columns}\r\n                            selection={dummySelection}\r\n                            selectionMode={SelectionMode.none}\r\n                        />\r\n                    </div>\r\n\r\n                    <Stack horizontal tokens={{ childrenGap: \"0 8\" }} style={{ marginTop: 16 }}>\r\n                        <PrimaryButton text=\"Save\" disabled={!changed} onClick={() => setShowSaveDialog(true)} />\r\n                        <DefaultButton text=\"Cancel\" disabled={!changed} onClick={() => setEditing(JSON.parse(JSON.stringify(current)))} />\r\n                    </Stack>\r\n                </Stack>\r\n            }\r\n            <Dialog\r\n                hidden={!showSaveDialog}\r\n                onDismiss={() => setShowSaveDialog(false)}\r\n                dialogContentProps={{\r\n                    type: DialogType.largeHeader,\r\n                    title: \"Save\",\r\n                    subText: \"Restart is required to apply configuration.\"\r\n                }}\r\n            >\r\n                <DialogFooter>\r\n                    <PrimaryButton\r\n                        text=\"Save\"\r\n                        onClick={() => {\r\n                            setShowSaveDialog(false);\r\n                            (async () => {\r\n                                console.log(\"TunersConfigurator\", \"PUT\", configAPI, \"<-\", editing);\r\n                                await fetch(configAPI, {\r\n                                    method: \"PUT\",\r\n                                    headers: { \"Content-Type\": \"application/json; charset=utf-8\" },\r\n                                    body: JSON.stringify(editing)\r\n                                });\r\n                                setSaved(true);\r\n                            })();\r\n                        }}\r\n                    />\r\n                    <DefaultButton\r\n                        text=\"Cancel\"\r\n                        onClick={() => setShowSaveDialog(false)}\r\n                    />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Configurator;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n    Text,\r\n    Icon,\r\n    GroupedList,\r\n    DetailsRow,\r\n    Selection,\r\n    IColumn,\r\n    IGroup,\r\n    Dialog,\r\n    DialogFooter,\r\n    DialogType,\r\n    PrimaryButton,\r\n    DefaultButton,\r\n    IconButton,\r\n    ColorClassNames\r\n} from \"@fluentui/react\";\r\nimport { TunerDevice } from \"../../../api\";\r\n\r\ninterface Item {\r\n    _group: string;\r\n    _kind: \"device\" | \"user\";\r\n    key: string;\r\n    name: string;\r\n    command?: JSX.Element;\r\n    controls?: JSX.Element;\r\n    user?: JSX.Element;\r\n    priority?: JSX.Element;\r\n}\r\n\r\nconst deviceColumns: IColumn[] = [\r\n    {\r\n        key: \"col-command\",\r\n        name: \"\",\r\n        fieldName: \"command\",\r\n        minWidth: 0,\r\n        isResizable: true,\r\n    },\r\n    {\r\n        key: \"col-controls\",\r\n        name: \"\",\r\n        fieldName: \"controls\",\r\n        minWidth: 0\r\n    }\r\n];\r\n\r\nconst userColumns: IColumn[] = [\r\n    {\r\n        key: \"col-user\",\r\n        name: \"\",\r\n        fieldName: \"user\",\r\n        minWidth: 0\r\n    },\r\n    {\r\n        key: \"col-priority\",\r\n        name: \"\",\r\n        fieldName: \"priority\",\r\n        minWidth: 0\r\n    }\r\n];\r\n\r\nconst dummySelection = new Selection(); // dummy\r\n\r\nconst onRenderCell = (nestingDepth: number, item: Item, itemIndex: number) => {\r\n    return <DetailsRow\r\n        columns={item._kind === \"device\" ? deviceColumns : userColumns}\r\n        groupNestingDepth={nestingDepth + (item._kind === \"device\" ? 0 : 1)}\r\n        item={item}\r\n        itemIndex={itemIndex}\r\n        selection={dummySelection}\r\n        selectionMode={0}\r\n        compact\r\n    />\r\n};\r\n\r\nconst TunersManager: React.FC<{ tuners: TunerDevice[] }> = ({ tuners }) => {\r\n\r\n    const [killTarget, setKillTarget] = useState<number>(null);\r\n\r\n    const items: Item[] = [];\r\n    for (const tuner of tuners) {\r\n        const item: Item = {\r\n            _group: `#${tuner.index}: ${tuner.name} (${tuner.types.join(\", \")})`,\r\n            _kind: \"device\",\r\n            key: `row-device-${tuner.index}`,\r\n            name: tuner.name,\r\n            command: (\r\n                <>\r\n                    <Icon title=\"Command\" iconName=\"ServerProcesses\" />\r\n                    <Text style={{ lineHeight: \"30px\", marginLeft: 8 }}>{tuner.command || \"-\"}</Text>\r\n                    <Text\r\n                        style={{ lineHeight: \"30px\", marginLeft: 8 }}\r\n                        className={ColorClassNames.neutralTertiaryAlt}\r\n                    >\r\n                        {tuner.pid ? `(pid=${tuner.pid})` : \"\"}\r\n                    </Text>\r\n                </>\r\n            )\r\n        };\r\n        if (tuner.command) {\r\n            item.controls = (\r\n                <IconButton\r\n                    title=\"Controls\"\r\n                    iconProps={{ iconName: \"More\" }}\r\n                    menuProps={{ items: [{\r\n                        key: \"kill\",\r\n                        text: \"Kill Tuner Process...\",\r\n                        iconProps: { iconName: \"Cancel\" },\r\n                        onClick: () => setKillTarget(tuner.index)\r\n                    }] }}\r\n                />\r\n            );\r\n        }\r\n        items.push(item);\r\n\r\n        for (const user of tuner.users) {\r\n            items.push({\r\n                _group: item._group,\r\n                _kind: \"user\",\r\n                key: `${item.key}-user-${user.id}`,\r\n                name: user.id,\r\n                user: (\r\n                    <>\r\n                        <Icon title=\"User\" iconName={/Mirakurun/.test(user.id) ? \"Processing\" : \"PlugConnected\"} />\r\n                        <Text style={{ marginLeft: 8 }}>{user.id}</Text>\r\n                    </>\r\n                ),\r\n                priority: (\r\n                    <>\r\n                        <Icon title=\"Priority\" iconName=\"SortLines\" />\r\n                        <Text style={{ marginLeft: 8 }}>{user.priority}</Text>\r\n                    </>\r\n                )\r\n            });\r\n        }\r\n    }\r\n\r\n    const groups: IGroup[] = [];\r\n    for (let i = 0; i < items.length; i++) {\r\n        const item = items[i];\r\n        let group = groups.find(group => group.key === item._group);\r\n        if (!group) {\r\n            group = {\r\n                key: item._group,\r\n                name: item._group,\r\n                startIndex: i,\r\n                count: 0\r\n            };\r\n            groups.push(group);\r\n        }\r\n        group.count++;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <GroupedList\r\n                items={items}\r\n                groups={groups}\r\n                groupProps={{ headerProps: { styles: { headerCount: { display: \"none\" } } } }} // hide count\r\n                onRenderCell={onRenderCell}\r\n                selectionMode={0}\r\n                compact\r\n            />\r\n            <Dialog\r\n                hidden={killTarget === null}\r\n                onDismiss={() => setKillTarget(null)}\r\n                dialogContentProps={{\r\n                    type: DialogType.largeHeader,\r\n                    title: \"Kill Tuner Process\",\r\n                    subText: \"Do you want to kill this running tuner process?\"\r\n                }}\r\n            >\r\n                <DialogFooter>\r\n                    <PrimaryButton\r\n                        text=\"Kill\"\r\n                        onClick={() => {\r\n                            (async () => {\r\n                                await fetch(`/api/tuners/${killTarget}/process`, { method: \"DELETE\" });\r\n                            })();\r\n                            setKillTarget(null);\r\n                        }}\r\n                    />\r\n                    <DefaultButton\r\n                        text=\"Cancel\"\r\n                        onClick={() => setKillTarget(null)}\r\n                    />\r\n                </DialogFooter>\r\n            </Dialog>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default TunersManager;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n    MessageBar,\r\n    MessageBarType,\r\n    MessageBarButton,\r\n    Link\r\n} from \"@fluentui/react\";\r\nimport { Version } from \"../../../api\";\r\n\r\nconst UpdateAlert: React.FC = () => {\r\n\r\n    const [updateAvailable, setUpdateAvailable] = useState<boolean>(false);\r\n    const [version, setVersion] = useState<Version>(null);\r\n\r\n    useEffect(() => {\r\n        setTimeout(async () => {\r\n            console.log(\"UpdateAlert\", \"checking update\", \"...\");\r\n            const version: Version = await (await fetch(\"/api/version\")).json();\r\n            setVersion(version);\r\n            if (version.current !== version.latest) {\r\n                setUpdateAvailable(true);\r\n            }\r\n            console.log(\"UpdateAlert\", \"checking update\", \"done.\");\r\n        }, 1000 * 5);\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            {updateAvailable === true && (\r\n                <MessageBar\r\n                    messageBarType={MessageBarType.warning}\r\n                    isMultiline={false}\r\n                    onDismiss={() => setUpdateAvailable(false)}\r\n                    dismissButtonAriaLabel=\"Close\"\r\n                    actions={\r\n                        <div>\r\n                            <MessageBarButton\r\n                                href=\"https://github.com/Chinachu/Mirakurun/blob/master/doc/Platforms.md\"\r\n                                target=\"_blank\"\r\n                            >\r\n                                How to Update\r\n                            </MessageBarButton>\r\n                        </div>\r\n                    }\r\n                >\r\n                    Update ({version.latest}) Available!\r\n                    <Link href=\"https://github.com/Chinachu/Mirakurun/blob/master/CHANGELOG.md\" target=\"_blank\">\r\n                        CHANGELOG\r\n                    </Link>\r\n                </MessageBar>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UpdateAlert;\r\n","/*\r\n   Copyright 2020 kanreisa\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\nimport EventEmitter from \"eventemitter3\";\r\nimport * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport {\r\n    createTheme,\r\n    loadTheme,\r\n    Fabric,\r\n    Stack,\r\n    ActionButton,\r\n    Pivot,\r\n    PivotItem,\r\n    Separator,\r\n    Text,\r\n    Link,\r\n    Icon,\r\n    ColorClassNames\r\n} from \"@fluentui/react\";\r\nimport { initializeIcons } from \"@fluentui/react/lib/Icons\";\r\nimport { Client as RPCClient } from \"jsonrpc2-ws\";\r\nimport { JoinParams, NotifyParams } from \"../../lib/Mirakurun/rpc.d\";\r\nimport { EventMessage } from \"../../lib/Mirakurun/Event.d\";\r\nimport { TunerDevice, Service, Status, Program } from \"../../api.d\";\r\nimport ConnectionGuide from \"./components/ConnectionGuide\";\r\nimport UpdateAlert from \"./components/UpdateAlert\";\r\nimport Restart from \"./components/Restart\";\r\nimport StatusView from \"./components/StatusView\";\r\nimport EventsView from \"./components/EventsView\";\r\nimport LogsView from \"./components/LogsView\";\r\nimport ConfigView from \"./components/ConfigView\";\r\nimport HeartView from \"./components/HeartView\";\r\nimport \"./index.css\";\r\n\r\ninitializeIcons();\r\n\r\nexport interface UIState {\r\n    version: string;\r\n    statusName: string;\r\n    statusIconName: string;\r\n    tuners: TunerDevice[];\r\n    services: Service[];\r\n    status: Status;\r\n}\r\n\r\nconst uiState: UIState = {\r\n    version: \"..\",\r\n    statusName: \"Loading\",\r\n    statusIconName: \"offline\",\r\n    tuners: [],\r\n    services: [],\r\n    status: null\r\n};\r\n\r\nconst uiStateEvents = new EventEmitter();\r\n\r\nconst iconSrcMap = {\r\n    normal: \"icon.svg\",\r\n    offline: \"icon-gray.svg\",\r\n    active: \"icon-active.svg\"\r\n};\r\n\r\nlet statusRefreshInterval: any;\r\nlet servicesRefreshInterval: any;\r\n\r\nfunction idleStatusChecker(): boolean {\r\n\r\n    let statusName = \"Standby\";\r\n    let statusIconName = \"normal\";\r\n\r\n    const isActive = uiState.tuners.some(tuner => tuner.isUsing === true && tuner.users.some(user => user.priority !== -1));\r\n    if (isActive) {\r\n        statusName = \"Active\";\r\n        statusIconName = \"active\";\r\n    }\r\n\r\n    if (uiState.statusName === statusName) {\r\n        return false;\r\n    }\r\n\r\n    uiState.statusName = statusName;\r\n    uiState.statusIconName = statusIconName;\r\n    uiStateEvents.emit(\"update\");\r\n\r\n    return true;\r\n}\r\nuiStateEvents.on(\"update:tuners\", idleStatusChecker);\r\n\r\nconst rpc = new RPCClient(`${location.protocol === \"https:\" ? \"wss:\" : \"ws:\"}//${location.host}/rpc`, {\r\n    protocols: null\r\n});\r\n\r\nrpc.on(\"connecting\", () => {\r\n\r\n    console.log(\"rpc:connecting\");\r\n\r\n    uiState.statusName = \"Connecting\";\r\n    uiStateEvents.emit(\"update\");\r\n});\r\n\r\nrpc.on(\"connected\", async () => {\r\n\r\n    console.log(\"rpc:connected\");\r\n\r\n    status: {\r\n        uiState.status = await rpc.call(\"getStatus\");\r\n\r\n        statusRefreshInterval = setInterval(async () => {\r\n            if (document.hidden) {\r\n                return;\r\n            }\r\n            uiState.status = await rpc.call(\"getStatus\");\r\n            uiStateEvents.emit(\"update:status\");\r\n        }, 1000 * 3);\r\n\r\n        if (uiState.version !== \"..\" && uiState.version !== uiState.status.version) {\r\n            location.reload();\r\n            return;\r\n        }\r\n        uiState.version = uiState.status.version;\r\n    }\r\n    services: {\r\n        uiState.services = await (await fetch(\"/api/services\")).json();\r\n\r\n        servicesRefreshInterval = setInterval(async () => {\r\n            if (document.hidden) {\r\n                return;\r\n            }\r\n            uiState.services = await (await fetch(\"/api/services\")).json();\r\n            uiStateEvents.emit(\"update:services\");\r\n        }, 1000 * 60);\r\n    }\r\n    uiState.tuners = await (await fetch(\"/api/tuners\")).json();\r\n\r\n    await rpc.call(\"join\", {\r\n        rooms: [\"events:tuner\", \"events:service\"]\r\n    } as JoinParams);\r\n\r\n    uiStateEvents.emit(\"update\");\r\n    uiStateEvents.emit(\"update:status\");\r\n    uiStateEvents.emit(\"update:services\");\r\n    uiStateEvents.emit(\"update:tuners\");\r\n});\r\n\r\nrpc.on(\"disconnect\", () => {\r\n\r\n    console.log(\"rpc:disconnected\");\r\n\r\n    clearInterval(statusRefreshInterval);\r\n    clearInterval(servicesRefreshInterval);\r\n\r\n    uiState.statusName = \"Disconnected\";\r\n    uiState.statusIconName = \"offline\";\r\n    uiStateEvents.emit(\"update\");\r\n});\r\n\r\nrpc.methods.set(\"events\", async (socket, { array }: NotifyParams<EventMessage>) => {\r\n\r\n    let reloadServiceRequired = false;\r\n\r\n    for (const event of array) {\r\n        if (event.resource === \"service\") {\r\n            const service: Service = event.data;\r\n            reloadServiceRequired = true;\r\n\r\n            for (const _service of uiState.services) {\r\n                if (_service.id === service.id) {\r\n                    Object.assign(_service, service);\r\n                    uiStateEvents.emit(\"update:services\");\r\n                    reloadServiceRequired = false;\r\n                    break;\r\n                }\r\n            }\r\n        } else if (event.resource === \"tuner\") {\r\n            const tuner: TunerDevice = event.data;\r\n\r\n            uiState.tuners[uiState.tuners.findIndex(value => value.index === tuner.index)] = tuner;\r\n            uiStateEvents.emit(\"update:tuners\");\r\n        }\r\n    }\r\n\r\n    if (reloadServiceRequired) {\r\n        uiState.services = await (await fetch(\"/api/services\")).json();\r\n        uiStateEvents.emit(\"update:services\");\r\n    }\r\n\r\n    uiStateEvents.emit(\"data:events\", array);\r\n});\r\n\r\nrpc.methods.set(\"logs\", (socket, { array }: NotifyParams<string> ) => {\r\n    uiStateEvents.emit(\"data:logs\", array);\r\n});\r\n\r\nconst Content = () => {\r\n\r\n    const [state, setState] = useState<UIState>(uiState);\r\n\r\n    useEffect(() => {\r\n\r\n        const title = `${state.statusName} - Mirakurun ${state.version}`;\r\n        if (document.title !== title) {\r\n            document.title = title;\r\n        }\r\n\r\n        const icon = document.getElementById(\"icon\");\r\n        if (icon.getAttribute(\"href\") !== iconSrcMap[state.statusIconName]) {\r\n            icon.setAttribute(\"href\", iconSrcMap[state.statusIconName]);\r\n        }\r\n\r\n        const onStateUpdate = () => {\r\n            setState({ ...uiState });\r\n        };\r\n        uiStateEvents.on(\"update\", onStateUpdate);\r\n\r\n        return () => {\r\n            uiStateEvents.removeListener(\"update\", onStateUpdate);\r\n        };\r\n    });\r\n\r\n    return (\r\n        <Fabric style={{ margin: \"16px\" }}>\r\n            <Stack tokens={{ childrenGap: \"8 0\" }}>\r\n                <UpdateAlert />\r\n\r\n                <Stack horizontal verticalAlign=\"center\" tokens={{ childrenGap: \"0 8\" }}>\r\n                    <img style={{ height: \"96px\" }} src={iconSrcMap[state.statusIconName]} />\r\n                    <div className=\"ms-fontSize-42\">Mirakurun</div>\r\n                    <Text variant=\"mediumPlus\" nowrap block className={ColorClassNames.themePrimary}>{state.status?.version}</Text>\r\n                    <Text variant=\"medium\" nowrap block className={ColorClassNames.neutralTertiaryAlt}>({state.statusName})</Text>\r\n                    <Stack.Item grow disableShrink>&nbsp;</Stack.Item>\r\n                    <ConnectionGuide />\r\n                    <ActionButton\r\n                        iconProps={{ iconName: \"KnowledgeArticle\" }}\r\n                        text=\"API Docs\"\r\n                        target=\"_blank\"\r\n                        href=\"/api/debug\"\r\n                    />\r\n                    <Restart uiStateEvents={uiStateEvents} />\r\n                </Stack>\r\n\r\n                <Pivot>\r\n                    <PivotItem itemIcon=\"GroupedList\" headerText=\"Status\">\r\n                        <StatusView uiState={uiState} uiStateEvents={uiStateEvents} />\r\n                    </PivotItem>\r\n                    <PivotItem itemIcon=\"EntitlementRedemption\" headerText=\"Events\">\r\n                        <EventsView uiStateEvents={uiStateEvents} rpc={rpc} />\r\n                    </PivotItem>\r\n                    <PivotItem itemIcon=\"ComplianceAudit\" headerText=\"Logs\">\r\n                        <LogsView uiStateEvents={uiStateEvents} rpc={rpc} />\r\n                    </PivotItem>\r\n                    <PivotItem itemIcon=\"Settings\" headerText=\"Config\">\r\n                        <ConfigView uiState={uiState} uiStateEvents={uiStateEvents} />\r\n                    </PivotItem>\r\n                    <PivotItem itemIcon=\"Heart\" headerText=\"Special Thanks\">\r\n                        <HeartView />\r\n                    </PivotItem>\r\n                </Pivot>\r\n\r\n                <Stack>\r\n                    <Separator />\r\n                    <Text>\r\n                        <Link href=\"https://github.com/Chinachu/Mirakurun\" target=\"_blank\">Mirakurun</Link> {state.version}\r\n                        &nbsp;&copy; 2016- <Link href=\"https://github.com/kanreisa\" target=\"_blank\">kanreisa</Link>.\r\n                    </Text>\r\n                    <Text>\r\n                        <Icon iconName=\"Heart\" /> <Link href=\"https://chinachu.moe/\" target=\"_blank\">Chinachu Project</Link>\r\n                        &nbsp;(<Link href=\"https://github.com/Chinachu\" target=\"_blank\">GitHub</Link>)\r\n                    </Text>\r\n                </Stack>\r\n\r\n                <Stack>\r\n                    <Text variant=\"xSmall\" className={ColorClassNames.neutralTertiaryAlt}>\r\n                        Mirakurun comes with ABSOLUTELY NO WARRANTY. USE AT YOUR OWN RISK.\r\n                    </Text>\r\n                </Stack>\r\n            </Stack>\r\n        </Fabric>\r\n    );\r\n};\r\n\r\nReactDOM.render(\r\n    <Content />,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\n// dark theme\r\nconst myTheme = createTheme({\r\n    palette: {\r\n        themePrimary: '#ffd56c',\r\n        themeLighterAlt: '#0a0904',\r\n        themeLighter: '#292211',\r\n        themeLight: '#4d4020',\r\n        themeTertiary: '#998040',\r\n        themeSecondary: '#e0bc5e',\r\n        themeDarkAlt: '#ffd97a',\r\n        themeDark: '#ffdf8f',\r\n        themeDarker: '#ffe8ac',\r\n        neutralLighterAlt: '#2d2f37',\r\n        neutralLighter: '#34363f',\r\n        neutralLight: '#40424c',\r\n        neutralQuaternaryAlt: '#474a54',\r\n        neutralQuaternary: '#4e505b',\r\n        neutralTertiaryAlt: '#686b77',\r\n        neutralTertiary: '#f1f1f1',\r\n        neutralSecondary: '#f4f4f4',\r\n        neutralPrimaryAlt: '#f6f6f6',\r\n        neutralPrimary: '#ebebeb',\r\n        neutralDark: '#fafafa',\r\n        black: '#fdfdfd',\r\n        white: '#25272e',\r\n    }\r\n});\r\nloadTheme(myTheme);\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_stuayu_mirakurun\"] = self[\"webpackChunk_stuayu_mirakurun\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors\"], () => (__webpack_require__(\"./src/ui/index.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}